#include<stdio.h>
#include<stdlib.h>
int main(){
    int n,q;
    scanf("%d %d",&n,&q);
    
    int **arr=(int**)malloc(n*sizeof(int*));
    int *sizes=(int*)calloc(n,sizeof(int));
    int *cap=(int*)calloc(n,sizeof(int));
    int lastAnswer=0;
    while(q--){
        int type,x,y;
        scanf("%d %d %d",&type,&x,&y);
        int idx=(x^lastAnswer)%n;
        if(type==1){
            if(sizes[idx]==cap[idx]){
                cap[idx]=cap[idx]?cap[idx]*2:2;
                arr[idx]=(int*)realloc(arr[idx],cap[idx]*sizeof(int));
            }
            arr[idx][sizes[idx]++]=y;
        }else{
            lastAnswer=arr[idx][y%sizes[idx]];
            printf("%d\n",lastAnswer);
        }
    }
    return 0;
}